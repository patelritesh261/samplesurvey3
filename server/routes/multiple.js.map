{"version":3,"sources":["routes/multiple.ts"],"names":[],"mappings":"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","file":"routes/multiple.js","sourcesContent":["import express = require('express');\r\nimport passport = require('passport');\r\nvar router = express.Router();\r\n\r\n\r\n//variable declaration\r\nvar surveyname,surveytype;\r\n// db references\r\nimport mongoose = require('mongoose');\r\nimport mcqModel = require('../models/multiple');\r\nimport agreeModel = require('../models/agree');\r\n\r\nimport Mcq = mcqModel.Mcq;\r\nimport Agree = agreeModel.Agree;\r\n/* Utility Function to check if user is authenticated */\r\nfunction requireAuth(req:express.Request, res:express.Response, next: any) {\r\n    // check if the user is logged in\r\n    if (!req.isAuthenticated()) {\r\n        return res.redirect('/login');\r\n    }\r\n    next();\r\n}\r\n\r\n// GET - show main users page - list all the users\r\nrouter.get('/createsurvey', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n   \r\n    // use the Users model to query the Users collection\r\n    Mcq.find((error, mcq) => {\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            // no error, we found a list of users\r\n            res.render('multiple/createsurvey', {\r\n                title: 'MCQ Survey',\r\n                mcq: mcq,\r\n                displayName: req.user ? req.user.displayName : ''\r\n            });\r\n        }\r\n    });\r\n});\r\nrouter.post('/createsurvey', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n   \r\n    \r\n            // no error, we found a list of users\r\n          \r\n   //surveyname=req.body;\r\n               // res.send(surveyname);\r\n               surveyname=req.body.surveyname;\r\n              surveytype=req.body.surveytype;\r\n              \r\n              //res.send(surveytype);\r\n             \r\n              if(surveytype===\"multiple\"){\r\n                res.redirect('/multiple/add');\r\n                }\r\n\r\n                \r\n                surveyname=req.body.surveyname;\r\n               \r\n                res.redirect('/multiple/agreeadd');\r\n\r\n    \r\n});\r\n/* Render Registration page */\r\nrouter.get('/agreeadd', (req:express.Request, res: express.Response, next:any) => {\r\n    \r\n        Agree.find((error, agree) => {\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            // no error, we found a list of users\r\n            res.render('multiple/agreeadd', {\r\n                title: 'Agree Survey',\r\n                surveyname:surveyname,\r\n                agree: agree,\r\n               messages: req.flash('registerMessage'),\r\n            displayName: req.user ? req.user.displayName : ''\r\n            \r\n            });\r\n        }\r\n    });\r\n        \r\n       \r\n});\r\n\r\n/* Process Registration Request */\r\nrouter.post('/agreeadd', (req:express.Request, res: express.Response, next:any) => {\r\n    // attempt to register user\r\n    Agree.create({\r\n        displayName: req.body.displayName,\r\n        surveyName: req.body.surveyname,\r\n        question: req.body.question,\r\n        option1: 'Agree',\r\n        option2: 'Disagree',\r\n        \r\n    }, function(error, User) {\r\n        // did we get back an error or valid Article object?\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            res.redirect('/multiple/agreeadd');\r\n        }\r\n    })\r\n});\r\n\r\n// GET edit page - show the current user in the form\r\nrouter.get('/agreeadd/:id', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n//res.send('fgfgfgf');\r\n    var id = req.params.id;\r\n\r\n    Agree.findById(id, (error, Agree) => {\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            //show the edit view\r\n            res.render('multiple/agreeedit', {\r\n                title: 'User Details',\r\n                agree: Agree,\r\n                displayName: req.user ? req.user.displayName : ''\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n// POST edit page - update the selected user\r\nrouter.post('/agreeadd/:id', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n\r\n    // grab the id from the url parameter\r\n    var id = req.params.id;\r\n\r\n    // create and populate a user object\r\n    var agree = new Agree({\r\n        _id: id,\r\n        displayName:req.body.displayName,\r\n        surveyName: req.body.surveyname,\r\n        question: req.body.question,\r\n        option1: 'Agree',\r\n         option2: 'Disagree'\r\n          \r\n    });\r\n    \r\n    \r\n\r\n    // run the update using mongoose and our model\r\n    Agree.update({ _id: id }, agree, (error) => {\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            // if update is successful redirect to the users page\r\n            res.redirect('/multiple/agreeadd');\r\n        }\r\n    });\r\n});\r\n\r\n/* Render Registration page */\r\nrouter.get('/add', (req:express.Request, res: express.Response, next:any) => {\r\n    \r\n        Mcq.find((error, mcq) => {\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            // no error, we found a list of users\r\n            res.render('multiple/add', {\r\n                title: 'MCQ Survey',\r\n                surveyname:surveyname,\r\n                mcq: mcq,\r\n               messages: req.flash('registerMessage'),\r\n            displayName: req.user ? req.user.displayName : ''\r\n            \r\n            });\r\n        }\r\n    });\r\n        \r\n       \r\n});\r\n\r\n/* Process Registration Request */\r\nrouter.post('/add', (req:express.Request, res: express.Response, next:any) => {\r\n    // attempt to register user\r\n    Mcq.create({\r\n        displayName: req.body.displayName,\r\n        surveyName: req.body.surveyname,\r\n        question: req.body.question,\r\n        option1: req.body.option1,\r\n        option2: req.body.option2,\r\n        option3: req.body.option3,\r\n        option4: req.body.option4,\r\n    }, function(error, User) {\r\n        // did we get back an error or valid Article object?\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            res.redirect('/multiple/add');\r\n        }\r\n    })\r\n});\r\n\r\n\r\n// GET add page - show the blank form\r\n/*router.get('/add', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n    res.render('users/add', {\r\n        title: 'Add a New User',\r\n        displayName: req.user ? req.user.displayName : ''\r\n    });\r\n});\r\n\r\n// POST add page - save the new user\r\nrouter.post('/add', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n    User.create({\r\n        username: req.body.username,\r\n        password: req.body.password,\r\n        email: req.body.email,\r\n        displayName: req.body.displayName\r\n    }, (error, User) => {\r\n        // did we get back an error or valid Users object?\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            res.redirect('/users');\r\n        }\r\n    })\r\n});*/\r\n\r\n// GET edit page - show the current user in the form\r\nrouter.get('/add/:id', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n\r\n    var id = req.params.id;\r\n\r\n    Mcq.findById(id, (error, Mcq) => {\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            //show the edit view\r\n            res.render('multiple/edit', {\r\n                title: 'User Details',\r\n                mcq: Mcq,\r\n                displayName: req.user ? req.user.displayName : ''\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n// POST edit page - update the selected user\r\nrouter.post('/add/:id', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n\r\n    // grab the id from the url parameter\r\n    var id = req.params.id;\r\n\r\n    // create and populate a user object\r\n    var mcq = new Mcq({\r\n        _id: id,\r\n        displayName:req.body.displayName,\r\n        surveyName: req.body.surveyname,\r\n        question: req.body.question,\r\n        option1: req.body.option1,\r\n         option2: req.body.option2,\r\n          option3: req.body.option3,\r\n           option4: req.body.option4\r\n    });\r\n    \r\n    \r\n\r\n    // run the update using mongoose and our model\r\n    Mcq.update({ _id: id }, mcq, (error) => {\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            // if update is successful redirect to the users page\r\n            res.redirect('/multiple/add');\r\n        }\r\n    });\r\n});\r\n\r\n// GET edit page - show the current user in the form\r\nrouter.get('/surveyname/', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\nres.send('Error');\r\n    /*var id = req.params.id;\r\n\r\n   var ds=req.user.displayName ;\r\n   Mcq.find(Mcq,{displayName:ds},{surveyName:id},(error, mcq) => {\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            //show the edit view\r\n            res.render('multiple/', {\r\n                title: 'User Details',\r\n                mcq: Mcq,\r\n                displayName: req.user ? req.user.displayName : ''\r\n            });\r\n        }\r\n    });*/\r\n});\r\n\r\n\r\n// GET delete user\r\nrouter.get('/delete/:id', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n\r\n    // get the id from the url\r\n    var id = req.params.id;\r\n\r\n    // use the model and delete this record\r\n    Mcq.remove({ _id: id }, (error) => {\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            // if removal worked redirect to users page\r\n            res.redirect('/multiple/add');\r\n        }\r\n    });\r\n});\r\n\r\n\r\nrouter.get('/agreedelete/:id', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n\r\n    // get the id from the url\r\n    var id = req.params.id;\r\n\r\n    // use the model and delete this record\r\n    Agree.remove({ _id: id }, (error) => {\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            // if removal worked redirect to users page\r\n            res.redirect('/multiple/agreeadd');\r\n        }\r\n    });\r\n});\r\nrouter.get('/text', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n      var ss=req.query;\r\n      res.redirect('/multiple/respond/'+ss.displayName+'/'+ss.surveyType+'/'+ss.surveyName);\r\n\r\n    //res.render('multiple/text');\r\n});\r\nrouter.post('/text', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n    var ss=req.body;\r\nres.send(ss);\r\n   // res.render('multiple/text');\r\n});\r\nrouter.get('/respond/:displayName/:surveyType/:surveyName', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n      var ss=req.query;\r\n     res.send('whoooooooooooooooooooooooooooooo');\r\n\r\n    //res.render('multiple/text');\r\n});\r\n\r\n// make this public\r\nmodule.exports = router;"],"sourceRoot":"/source/"}